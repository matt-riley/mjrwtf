{"id":"mjrwtf-19j","title":"Docs audit: Docker Compose testing docs parity","description":"Ensure Docker Compose testing docs are up to date and consistent between root docs and docs-site.\n\nScope:\n- `DOCKER_COMPOSE_TESTING.md`\n- `docs-site/src/content/docs/operations/docker-compose-testing.md`\n- `docker-compose.yml`\n\nChecks:\n- Same recommended workflow/commands in both docs.\n- Any referenced services, env vars, and ports match compose file.\n- Clarify prerequisites and cleanup steps.","acceptance_criteria":"- Root and docs-site Docker Compose testing docs do not contradict.\n- Commands match `docker-compose.yml` and succeed when run.\n- Links between docs are correct (if present).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.043119Z","updated_at":"2026-01-06T15:05:42.043119Z"}
{"id":"mjrwtf-4z7","title":"Docs audit: Security documentation (tokens, headers, rate limits)","description":"Review security docs for accuracy and completeness.\n\nScope:\n- `SECURITY.md`\n- `docs-site/src/content/docs/security.md`\n- Auth token config (`AUTH_TOKENS` preferred, `AUTH_TOKEN` legacy)\n- Rate limiting notes and env vars\n\nChecks:\n- No instructions encourage leaking tokens (CLI args, logs).\n- `/metrics` auth behavior and config is documented correctly.\n- Rate limit env var names and defaults are correct.","acceptance_criteria":"- Security docs match current auth/rate-limit/metrics behavior.\n- No stale env var names or incorrect defaults.\n- Clear guidance on safe token handling.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.053318Z","updated_at":"2026-01-06T15:05:42.053318Z"}
{"id":"mjrwtf-57s","title":"TUI: created URL not visible in URL list after create (pagination/filter/offset)","description":"The Bubble Tea TUI refreshes the URL list after a successful create, but it refreshes using the *current* pagination offset (and re-applies any active filter query). If the user is not on the first page (offset\u003e0), a newly-created URL (sorted newest-first) will land on offset=0 and therefore won’t appear on the current page; the UI can even show the empty-state text which reads like there are no URLs at all.\n\nCode pointers:\n- After create success: `internal/tui/model.go` refreshes with `listURLsCmd(m.cfg, m.pageSize, m.offset)` (keeps offset) and `listURLsMsg` handling re-applies filter.\n- Empty state message in `model.go` when `len(m.filtered)==0` is: \"No URLs yet...\" which is misleading when offset\u003e0 and/or filter hides results.\n\nWhy this matches the reported symptoms:\n- Server query orders by `created_at DESC` (`internal/adapters/repository/sqlc/sqlite/queries.sql`), so new URLs appear on page 1.\n- If user was on page 2+ or had a filter applied, the new URL won’t be visible after create even though creation succeeded.","acceptance_criteria":"- Repro shows: create succeeds but URL not visible on current page.\n- Expected behavior decided and implemented (likely: on create success, jump to first page and refresh; optionally clear filter or provide an explicit toast indicating it may be filtered out).\n- Empty-state text is not misleading when offset\u003e0 and/or filter is active (e.g., differentiate \"No URLs on this page\" vs \"No URLs yet\" vs \"No matches for filter\").\n- Add/adjust TUI unit test(s) to lock in the behavior (model update after create should reset offset and/or clear filter before refreshing, per decided UX).","notes":"Research artifact written: `thoughts/shared/research/2026-01-06_cli-tui-testing-and-url-list.md` (local). It captures the likely root cause (create refresh preserves offset + filter reapply) and a concrete repro.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T14:43:19.631267Z","updated_at":"2026-01-06T14:54:11.608451Z","closed_at":"2026-01-06T14:54:11.608451Z","close_reason":"Implemented TUI fix: after create success, reset offset/cursor to 0 before refreshing so new URL appears (newest-first). Updated empty-state messaging to distinguish: no URLs yet vs no URLs on this page (offset\u003e0) vs no matches for filter; added unit tests covering offset reset and empty-state cases."}
{"id":"mjrwtf-75o","title":"Docs audit: Docker operations docs","description":"Review Docker-related docs for correctness and consistency.\n\nScope:\n- `docs-site/src/content/docs/operations/docker.md`\n- `Dockerfile`\n- `docker-entrypoint.sh` (if referenced)\n\nChecks:\n- Build/run examples reflect current Dockerfile args/env.\n- Any published image/tag instructions are correct.\n- Confirm ports, volumes, and required env vars are accurate.","acceptance_criteria":"- Docker docs match the current Dockerfile/entrypoint behavior.\n- All documented commands work as written.\n- No outdated references to images/tags/ports.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.041014Z","updated_at":"2026-01-06T15:05:42.041014Z"}
{"id":"mjrwtf-7fy","title":"Docs audit: Database schema + migrations documentation","description":"Review database schema and migration docs for accuracy.\n\nScope:\n- `docs-site/src/content/docs/operations/schema.md`\n- `docs-site/src/content/docs/operations/migrations.md`\n- `internal/migrations/sqlite/` (referenced)\n- `Makefile` migration targets and `cmd/migrate`\n\nChecks:\n- Goose commands and `DATABASE_URL` usage are accurate.\n- Notes about embedded migrations (rebuild required) are correct.\n- Schema references match the current migrations/sqlc schema.","acceptance_criteria":"- Migration docs reflect actual `make` targets and `bin/migrate` behavior.\n- Schema doc matches the current DB schema.\n- No stale migration instructions remain.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.046618Z","updated_at":"2026-01-06T15:05:42.046618Z"}
{"id":"mjrwtf-bzq","title":"Document and validate full CLI/TUI testing workflow","description":"We need a clear, end-to-end testing guide for the `mjr` CLI (currently only `mjr tui`) that covers unit tests, integration tests, and any manual/automatable E2E checks.\n\nWhat exists today:\n- TUI has unit-level tests in `internal/tui/*_test.go` (model update behavior, create/list/delete/analytics cmd tests using `httptest`).\n- Server/API integration tests exist (e.g. `internal/infrastructure/http/server/e2e_integration_test.go`).\n- Browser UI E2E tests exist via Playwright in `e2e/` (not CLI, but relevant to overall app regression).\n\nGaps / questions to resolve:\n- How to run a realistic TUI smoke test against a running server (local SQLite) in a repeatable way.\n- Whether we want to automate TUI interaction (likely hard) vs codify a manual checklist.\n\nDeliverable:\n- Add a doc section (README or docs-site) describing: prerequisites, env vars (`MJR_BASE_URL`, `MJR_TOKEN`), commands (`go test ./...`, `make test-unit`, `make test-integration`), and a short manual smoke checklist for the TUI (list/refresh/create/delete/analytics).","acceptance_criteria":"- A single documented procedure exists for running all relevant CLI/TUI tests locally and in CI.\n- Procedure references the actual existing test commands and key env vars.\n- Includes a short manual smoke checklist for the TUI (until automation is added).","notes":"Completion notes (no code changes):\n\n## Canonical test entrypoints\nFrom repo root:\n- `make test` (runs codegen + all Go tests)\n- `make test-unit` (codegen + `go test -short ./...`)\n- `make test-integration` (codegen + server integration tests)\n\nCodegen prerequisite:\n- `make generate` (sqlc + templ); required before tests in CI.\n\nBrowser E2E (HTML UI):\n- `cd e2e \u0026\u0026 npm install`\n- `npx playwright install --with-deps chromium`\n- `npm test`\n\n## CLI/TUI-specific automated coverage\n- Unit tests: `go test ./internal/tui -run Test -v` (subset) or via `make test[-unit]`.\n- TUI cmd tests use `httptest` to validate requests to `/api/urls` etc.\n\n## Manual TUI smoke checklist (recommended)\nPre-reqs:\n- Server: set `AUTH_TOKENS`, run `go run ./cmd/server` (or `make build-server \u0026\u0026 ./bin/server`).\n- TUI: set `MJR_BASE_URL` + `MJR_TOKEN`, run `go run ./cmd/mjr tui`.\n\nChecklist:\n1) Startup: list loads (GET /api/urls), status shows “Loaded X/Y”.\n2) Refresh: press `r`, list reloads.\n3) Create: press `c`, enter valid URL, submit; confirm status “Created: … (copied…)”.\n4) Verify list shows new URL (note: see bug mjrwtf-57s re pagination/filter).\n5) Analytics: select item, press `a`, ensure analytics loads; press `b` back.\n6) Delete: press `d`, confirm with Enter/y; verify removed from list.\n7) Pagination: create enough URLs to exceed 20; verify `n/p` page.\n8) Filter: press `/`, type part of short code/original url, enter; verify filtered count.\n\nAll of the above is also captured in `thoughts/shared/research/2026-01-06_cli-tui-testing-and-url-list.md`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T14:43:19.634872Z","updated_at":"2026-01-06T14:45:53.009127Z","closed_at":"2026-01-06T14:45:53.002328Z","close_reason":"Completed"}
{"id":"mjrwtf-c44","title":"Docs audit: Integration testing docs (unit/integration/e2e)","description":"Align and update testing documentation across the repo.\n\nScope:\n- `docs-site/src/content/docs/operations/integration-testing.md`\n- `e2e/README.md`\n- Any references in root README/Makefile\n\nChecks:\n- Correct commands for unit vs integration vs Playwright e2e.\n- Prerequisites (Playwright install, env vars) are accurate.\n- Clarify what each suite covers and when to run it.","acceptance_criteria":"- Testing docs provide correct commands for each suite.\n- Prerequisites are clearly stated.\n- No stale or broken instructions remain.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.057476Z","updated_at":"2026-01-06T15:05:42.057476Z"}
{"id":"mjrwtf-cdz","title":"Fix failing CI policy test: local action flagged as unpinned","description":"`go test ./...` fails in `internal/ci`:\n\n```\n--- FAIL: TestWorkflowPolicyCheck_PassesWithPinnedActionsAndCodegen\nError: unpinned action reference:   - uses: \"./.github/actions/my-action\"\n```\n\nThe workflow policy checker treats local composite actions (`uses: \"./.github/actions/...\"`) as \"unpinned\" and fails. Local actions are not version-pinned by design, so the checker/test should allow `./.github/actions/*` (or update fixture expectations).\n\nRepro:\n- Run `go test ./...`\n- Observe failure in `internal/ci/workflow_policy_check_test.go`.\n\nLikely files:\n- `internal/ci/workflow_policy_check_test.go`\n- workflow policy check implementation under `internal/ci/`\n- workflow fixture(s) under `.github/workflows/` or testdata (if present)\n- local action under `.github/actions/`","acceptance_criteria":"- `go test ./...` passes (no failure in `internal/ci`).\n- Workflow policy check allows local actions (`uses: \"./.github/actions/...\"`) without requiring pinning.\n- Still enforces pinning for remote actions (e.g. `actions/checkout@...` must be a SHA).","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T14:55:55.16475Z","updated_at":"2026-01-06T15:35:11.332848Z","closed_at":"2026-01-06T15:35:11.332848Z","close_reason":"Closed via update"}
{"id":"mjrwtf-ch8","title":"Docs audit: scripts/README and VHS tape workflows","description":"Ensure `scripts/` documentation is current and usable.\n\nScope:\n- `scripts/README.md`\n- `scripts/*.tape` (demo + TUI screenshot capture)\n\nChecks:\n- Prereqs for running tape scripts (e.g., VHS) are documented.\n- Output paths referenced by scripts still match docs-site assets.\n- Identify any stale script references or filenames.","acceptance_criteria":"- scripts README explains how to run tape scripts with correct prerequisites.\n- Tape scripts produce the documented outputs.\n- Outdated references are updated or removed.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T15:05:42.060303Z","updated_at":"2026-01-06T15:05:42.060303Z"}
{"id":"mjrwtf-dfg","title":"Docs audit: README.md and docs-site overview alignment","description":"Review and update the primary landing docs so they match the current project behavior and commands.\n\nScope:\n- `README.md`\n- `docs-site/src/content/docs/index.mdx`\n- `docs-site/src/content/docs/getting-started/overview.md`\n\nChecks:\n- Install/build/run commands match `Makefile` targets.\n- Any referenced endpoints, env vars, and features reflect current behavior.\n- Links/images are not broken (including docs-site paths).\n\nOut of scope:\n- Implementing feature changes; doc fixes only.","acceptance_criteria":"- Root README and docs-site overview agree on recommended install/run paths.\n- All commands in these docs succeed when run as written (or clearly marked as examples).\n- Broken links/images are fixed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.04873Z","updated_at":"2026-01-06T15:05:42.04873Z"}
{"id":"mjrwtf-eek","title":"Docs audit: API docs vs openapi.yaml consistency","description":"Ensure docs-site API docs match `openapi.yaml` and current server responses.\n\nScope:\n- `openapi.yaml`\n- `docs-site/src/content/docs/api/index.md`\n- `docs-site/src/content/docs/api/error-handling.md`\n\nChecks:\n- Endpoint list, auth requirements, and error shapes are accurate.\n- Example requests/responses align with OpenAPI.\n- Ensure `make validate-openapi` guidance is correct.","acceptance_criteria":"- API docs and OpenAPI spec are consistent.\n- Examples reflect real response fields and error formats.\n- Any discrepancies are resolved by updating docs/spec (as appropriate).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.05223Z","updated_at":"2026-01-06T15:05:42.05223Z"}
{"id":"mjrwtf-mqt","title":"Docs audit: Contributing / community docs consistency","description":"Review contributing/community docs and ensure they match current workflows.\n\nScope:\n- `CONTRIBUTING.md`\n- `CODE_OF_CONDUCT.md`\n- `AGENTS.md`\n- `docs-site/src/content/docs/contributing/index.md`\n\nChecks:\n- Dev workflow: generation (`make generate`), tests (`make test-unit`, `make test-integration`), lint/vet.\n- Any repo policies (PR expectations, formatting) are accurate.\n- Links between contributing docs and docs-site are correct.","acceptance_criteria":"- Contributing docs accurately describe the current dev workflow.\n- No broken links.\n- Guidance matches actual `make` targets and repo expectations.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.055673Z","updated_at":"2026-01-06T15:05:42.055673Z"}
{"id":"mjrwtf-ood","title":"Docs audit: Getting Started (local development + configuration)","description":"Ensure Getting Started docs reflect current configuration, env vars, and local dev workflow.\n\nScope:\n- `docs-site/src/content/docs/getting-started/local-development.md`\n- `docs-site/src/content/docs/getting-started/configuration.md`\n\nChecks:\n- Env vars documented match current config (`AUTH_TOKENS`, `METRICS_AUTH_ENABLED`, rate limit vars, etc.).\n- Local dev instructions cover generation (`make generate`), build/run, and database setup expectations.\n- Mention any required prerequisites (Go version, sqlc/templ if needed).","acceptance_criteria":"- Getting Started docs match current env var/config behavior.\n- Commands and example env var names are accurate.\n- No stale flags/variables remain.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.037218Z","updated_at":"2026-01-06T15:05:42.037218Z"}
{"id":"mjrwtf-s7i","title":"Docs audit: internal component READMEs (domain/http/notifications/templates)","description":"Review internal package READMEs to ensure they match the current architecture and usage.\n\nScope:\n- `internal/domain/README.md`\n- `internal/infrastructure/http/README.md`\n- `internal/adapters/notification/README.md`\n- `internal/adapters/http/templates/README.md`\n\nChecks:\n- Ensure they reflect current package responsibilities and integration points.\n- Update any code examples or referenced paths.\n- Ensure they don’t contradict the docs-site architecture guidance (if any).","acceptance_criteria":"- Internal READMEs are accurate and not stale.\n- Examples compile (or are clearly illustrative).\n- References/links are correct.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T15:05:42.072126Z","updated_at":"2026-01-06T15:05:42.072126Z"}
{"id":"mjrwtf-scz","title":"Docs audit: Observability (health/metrics/logging)","description":"Validate observability documentation against the current server behavior.\n\nScope:\n- `docs-site/src/content/docs/operations/observability.md`\n- Any referenced endpoints `/health`, `/metrics`\n- Env vars impacting metrics auth (`METRICS_AUTH_ENABLED`) and logging\n\nChecks:\n- Endpoint paths and auth expectations are correct.\n- Prometheus scrape examples (if any) are accurate.\n- No sensitive-data logging recommendations contradict actual behavior.","acceptance_criteria":"- Observability docs match the current endpoints and auth behavior.\n- Env var names and defaults are correct.\n- Examples are runnable and safe.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:05:42.061454Z","updated_at":"2026-01-06T15:05:42.061454Z"}
{"id":"mjrwtf-waj","title":"Update docs-site TUI screenshots to match current UI/empty states","description":"The TUI empty-state messaging and create-refresh behavior changed (see mjrwtf-57s). We should refresh the docs-site TUI screenshots to match the current UI text/layout.\n\nCurrent screenshot assets:\n- `docs-site/public/images/tui/screenshots/`\n  - `tui-empty-{light,dark}.png`\n  - `tui-browsing-{light,dark}.png`\n  - `tui-create-{light,dark}.png`\n  - `tui-delete-confirmation-{light,dark}.png`\n  - `tui-analytics-{light,dark}.png`\n\nScripts for generating screenshots (likely VHS):\n- `scripts/tui-screenshots-light.tape`\n- `scripts/tui-screenshots-dark.tape`\n\nDocs page referencing them:\n- `docs-site/src/content/docs/operations/tui.md`\n\nWork:\n- Re-run the screenshot capture scripts (or update them if needed) and replace the PNGs in `docs-site/public/images/tui/screenshots/`.\n- Verify the docs page renders correctly with the updated images.","acceptance_criteria":"- TUI screenshots in `docs-site/public/images/tui/screenshots/` reflect the current UI (including updated empty-state text).\n- If capture scripts need changes, update `scripts/tui-screenshots-*.tape` accordingly.\n- `docs-site/src/content/docs/operations/tui.md` references remain valid (no broken image paths).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T15:01:52.784641Z","updated_at":"2026-01-06T15:01:52.784641Z"}
{"id":"mjrwtf-xwb","title":"Docs audit: release/changelog process documentation","description":"Review documentation around releases and changelog generation.\n\nScope:\n- `CHANGELOG.md`\n- `release-please-manifest.json`\n- Any README/docs-site references to releases/tags\n\nChecks:\n- Ensure release process (release-please, tags) is documented correctly.\n- Changelog formatting and expectations are clear.\n- Remove or update stale release instructions.","acceptance_criteria":"- Release/changelog documentation reflects current release tooling.\n- Any referenced commands/process steps are accurate.\n- No stale references remain.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T15:05:42.06315Z","updated_at":"2026-01-06T15:05:42.06315Z"}
